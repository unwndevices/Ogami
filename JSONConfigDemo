#define ARDUINOJSON_ENABLE_PROGMEM 1
#include <ArduinoJson.h>


String  UNWNJSONAudioLibrary = "{\"list\" : [{\
\"object\": \"null\",\
\"classType\": \"AudioMixer4\",\
\"name\": \"feedback_mixer\",\
\"config\": [{\
 \"method\" : \"sampleRate\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"autoMakeupGain\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"frequency\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"resonance\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]}\
 ]\
 \
},\
{\
\"object\": \"null\",\
\"classType\": \"wdwd\",\
\"name\": \"asd\",\
\"config\": [{\
 \"method\" : \"sampleRate\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"autoMakeupGain\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"frequency\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]},\
 {\
 \"method\" : \"resonance\" ,\
 \"params\" : [\
     [0, 139],\
     [0, 139]\
 ]}\
 ]\
 \
}]\
\
}";

  DynamicJsonDocument UNWNAudioJSON(4096);
  JsonObject UNWNAudioLibrary;

 
 
  
void setup() {
  Serial.begin(9600);
   deserializeJson(UNWNAudioJSON, UNWNJSONAudioLibrary);
  UNWNAudioLibrary = UNWNAudioJSON.as<JsonObject>();

}

void loop() {
  delay(1000);
 Serial.println("Reading audio components");

  int JSONAudioSize = UNWNAudioLibrary.size();
  int i = 0 ;
  while(i <= JSONAudioSize){
    //loop every single audio element
    String currentAudioName =  UNWNAudioLibrary["list"][i]["name"];//.as<const char*>;
    String currentClassType =  UNWNAudioLibrary["list"][i]["classType"];//.as<const char*>;
    Serial.print("FOUND AUDIO ELEMENT -> ");
    Serial.print(currentAudioName);
    Serial.print(" [classType=");
    Serial.print(currentClassType);
    Serial.print("] ");


    //look for config

    if (UNWNAudioLibrary["list"][i].containsKey("config")){
      int clength = UNWNAudioLibrary["list"][i]["config"].size();
      Serial.print(" contains config");
      Serial.print("clength = ");
      Serial.println(clength);

      for(int k = 0; k < clength; k++){
      String currentMethod =  UNWNAudioLibrary["list"][i]["config"][k]["method"];//.as<const char*>;

       Serial.print(" METHODS : ");
      Serial.println(currentMethod);
      
      }
  
    }




    

    i++;
  }
  //delay(5000);
   while(true);
}
